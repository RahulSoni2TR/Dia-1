<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Product</title>
    <link rel="stylesheet" href="add_product_style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Add New Product</h1>
        <form id="productForm" enctype="multipart/form-data">
            <label for="categoryId">Category:</label>
            <select id="categoryId" name="categoryId" required>
                <option value="">Select Category</option>
                <option value="1">Diamond Rings</option>
                <option value="2">Open Setting</option>
                <option value="3">Chains</option>
                <option value="4">Diamond Earrings</option>
                <option value="5">Vilandi</option>
                <option value="6">Jadtar Register</option>
            </select>

            <label for="productName">Product Name:</label>
            <input type="text" id="productName" name="productName" required>

            <label for="price">Price:</label>
            <input type="number" id="price" name="price" step="0.01" required>

            <label for="stockQuantity">Stock Quantity:</label>
            <input type="number" id="stockQuantity" name="stockQuantity" required>

            <label for="imageUrl">Product Image:</label>
            <input type="file" id="imageUrl" name="imageUrl" accept="image/*" required>

            <!-- Dynamic Fields -->
            <div id="dynamicFields"></div>

            <input type="submit" value="Add Product">
        </form>
        <a href="/home" class="back-button">Back to Home</a>
    </div>

    <script>
        $(document).ready(function() {
            $('#categoryId').on('change', function() {
                const categoryId = $(this).val();
                $('#dynamicFields').empty(); // Clear existing fields

                if (categoryId == "1") { // Diamond Rings
                    $('#dynamicFields').append(`
                        <label for="net">Net:</label>
                        <input type="number" id="net" name="net" step="0.01" required>
                        <label for="pcs">Pieces:</label>
                        <input type="number" id="pcs" name="pcs">
                        <label for="diaWeight">Diamond Weight (ct):</label>
                        <input type="number" id="diaWeight" name="diaWeight" step="0.01">
                        <label for="remarks">Remarks:</label>
                        <input type="text" id="remarks" name="remarks">
                    `);
                } else if (categoryId == "2") { // Open Setting
                    $('#dynamicFields').append(`
                    	<label for="net">Net:</label>
                        <input type="number" id="net" name="net" step="0.01" required>
                        
                        
                        <label for="gross">Gross:</label>
                        <input type="number" id="gross" name="gross" step="0.01" required>
                        
                        
                        <div class="inline-fields">
                        <label for="vilandiCt">Vilandi:</label>
                        <input type="number" id="vilandiCt" name="vilandiCt" step="0.01">
                        <label for="vilandiRate">Vilandi Rate:</label>
                        <input type="number" id="vilandiRate" name="vilandiRate" step="0.01">
                  		  </div>
                        
                        
                        <label for="diamondsCt">Diamonds (ct):</label>
                        <input type="number" id="diamondsCt" name="diamondsCt">
                        
                        <div class="inline-fields">
                        <label for="beadsCt">Beads (Ct.):</label>
                        <input type="number" id="beadsCt" name="beadsCt">
                        <label for="vilandiBeadsRate">Beads Rate:</label>
                        <input type="number" id="vilandiBeadsRate" name="vilandiBeadsRate" step="0.01">
                    </div>
                        
                        
                        <div class="inline-fields">
                        <label for="pearlsGm">Pearls (gm):</label>
                        <input type="number" id="pearlsGm" name="pearlsGm" step="0.01">
                        <label for="vilandiPearlRate">Pearls Rate:</label>
                        <input type="number" id="vilandiPearlRate" name="vilandiPearlRate" step="0.01">
                    </div> 
                        
                    
                        <label for="otherStonesCt">Other Stones:</label>
                        <input type="number" id="otherStonesCt" name="otherStonesCt">
                        
                        
                        <label for="remarks">Remarks:</label>
                        <input type="text" id="remarks" name="remarks">
                    `);
                } else if (categoryId == "3") { // Chains
                    $('#dynamicFields').append(`
                        <label for="designNo">Design No:</label>
                        <input type="text" id="designNo" name="designNo" required>
                        <label for="chainNet">Net:</label>
                        <input type="number" id="chainNet" name="chainNet" step="0.01" required>
                        <label for="remarks">Remarks:</label>
                        <input type="text" id="remarks" name="remarks">
                    `);
                } else if (categoryId == "4") { // Diamond Earrings
                    $('#dynamicFields').append(`
                        <label for="designNoEarring">Design No:</label>
                        <input type="text" id="designNoEarring" name="designNoEarring" required>
                        <label for="earringNet">Net:</label>
                        <input type="number" id="earringNet" name="earringNet" step="0.01" required>
                        <label for="earringPcs">Pieces:</label>
                        <input type="number" id="earringPcs" name="earringPcs">
                        <label for="diamondWeightEarring">Diamond (ct):</label>
                        <input type="number" id="diamondWeightEarring" name="diamondWeightEarring" step="0.01">
                        <label for="remarks">Remarks:</label>
                        <input type="text" id="remarks" name="remarks">
                    `);
                } else if (categoryId == "5") { // Vilandi
                    $('#dynamicFields').append(`
                        <label for="designNoVilandi">Design No:</label>
                        <input type="text" id="designNoVilandi" name="designNoVilandi" required>
                        <label for="vilandiNet">Net:</label>
                        <input type="number" id="vilandiNet" name="vilandiNet" step="0.01" required>

                        <div class="inline-fields">
                        <label for="vilandi">Vilandi:</label>
                        <input type="number" id="vilandi" name="vilandi">
                        <label for="vilandiRate">Vilandi Rate:</label>
                        <input type="number" id="vilandiRate" name="vilandiRate" step="0.01">
                  		  </div>
                        
                        
                        <div class="inline-fields">
                        <label for="stones">Stones:</label>
                        <input type="number" id="stones" name="stones">
                        <label for="vilandiStoneRate">Stones Rate:</label>
                        <input type="number" id="vilandiStoneRate" name="vilandiStoneRate" step="0.01">
                  		  </div>

                        
                        <!-- Beads and Beads Rate -->
                        <div class="inline-fields">
                            <label for="beadsVilandi">Beads (Ct.):</label>
                            <input type="number" id="beadsVilandi" name="beadsVilandi">
                            <label for="vilandiBeadsRate">Beads Rate:</label>
                            <input type="number" id="vilandiBeadsRate" name="vilandiBeadsRate" step="0.01">
                        </div>

                        <div class="inline-fields">
                        <label for="pearlsVilandi">Pearls (gm):</label>
                        <input type="number" id="pearlsVilandi" name="pearlsVilandi" step="0.01">
                        <label for="vilandiPearlRate">Pearls Rate:</label>
                        <input type="number" id="vilandiPearlRate" name="vilandiPearlRate" step="0.01">
                    </div> 
                        

                        
                        <div class="inline-fields">
                        <label for="ssPearlCt">SS Pearls (Ct.):</label>
                        <input type="number" id="ssPearlCt" name="ssPearlCt">
                        <label for="vilandiSSPearlRate">SS Pearls Rate:</label>
                        <input type="number" id="vilandiSSPearlRate" name="vilandiSSPearlRate" step="0.01">
                    </div>
                        
               
                <div class="inline-fields">
                                <label for="realStone">Real Stones (Ct.):</label>
                                <input type="number" id="realStone" name="realStone">
                                <label for="vilandiFitting">Fitting:</label>
                                <input type="text" id="vilandiFitting" name="vilandiFitting">
                            </div>
                        
                        
                        <label for="remarks">Remarks:</label>
                        <input type="text" id="remarks" name="remarks">
                    `);
                } else if (categoryId == "6") { // Jadtar Register
                    $('#dynamicFields').append(`
                            <label for="designNoJadtar">Design No:</label>
                            <input type="text" id="designNoJadtar" name="designNoJadtar" required>
                            <label for="jadtarGross">Gross:</label>
                            <input type="number" id="jadtarGross" name="jadtarGross" step="0.01" required>
                            <label for="jadtarNet">Net:</label>
                            <input type="number" id="jadtarNet" name="jadtarNet" step="0.01" required>

                            <!-- Stones and Stone Rate -->
                            <div class="inline-fields">
                                <label for="jadtarStones">Stones:</label>
                                <input type="number" id="jadtarStones" name="jadtarStones">
                                <label for="jadtarStoneRate">Stones Rate:</label>
                                <input type="number" id="jadtarStoneRate" name="jadtarStoneRate" step="0.01">
                            </div>

                            <!-- Beads and Beads Rate -->
                            <div class="inline-fields">
                                <label for="jadtarBeads">Beads (Ct.):</label>
                                <input type="number" id="jadtarBeads" name="jadtarBeads">
                                <label for="jadtarBeadsRate">Beads Rate:</label>
                                <input type="number" id="jadtarBeadsRate" name="jadtarBeadsRate" step="0.01">
                            </div>

                            <!-- Pearls and Pearl Rate -->
                            <div class="inline-fields">
                                <label for="jadtarPearls">Pearls Weight (gm):</label>
                                <input type="number" id="jadtarPearls" name="jadtarPearls" step="0.01">
                                <label for="jadtarPearlRate">Pearls Rate:</label>
                                <input type="number" id="jadtarPearlRate" name="jadtarPearlRate" step="0.01">
                            </div>

                            <!-- SS Pearls and SS Pearl Rate -->
                            <div class="inline-fields">
                                <label for="jadtarSSPearl">SS Pearls (Ct.):</label>
                                <input type="number" id="jadtarSSPearl" name="jadtarSSPearl">
                                <label for="jadtarSSPearlRate">SS Pearls Rate:</label>
                                <input type="number" id="jadtarSSPearlRate" name="jadtarSSPearlRate" step="0.01">
                            </div>

                            <!-- Real Stone and Fitting -->
                            <div class="inline-fields">
                                <label for="jadtarRealStone">Real Stones (Ct.):</label>
                                <input type="number" id="jadtarRealStone" name="jadtarRealStone">
                                <label for="jadtarFitting">Fitting:</label>
                                <input type="text" id="jadtarFitting" name="jadtarFitting">
                            </div>

                            <!-- Mozonite and Mozonite Rate -->
                            <div class="inline-fields">
                                <label for="mozStone">Mozonite:</label>
                                <input type="number" id="mozStone" name="mozStone">
                                <label for="mozStoneRate">Mozonite Rate:</label>
                                <input type="number" id="mozStoneRate" name="mozStoneRate" step="0.01">
                            </div>

                            <!-- Remarks -->
                            <label for="remarks">Remarks:</label>
                            <input type="text" id="remarks" name="remarks">
                        `);
                    }
            });

            $('#productForm').on('submit', function(e) {
                e.preventDefault(); // Prevent default form submission

                // Create a FormData object to capture form data
                const formData = new FormData(this);

                // Send AJAX request
                $.ajax({
                    url: '/add', // Change this to your actual URL
                    type: 'POST',
                    data: formData,
                    contentType: false,
                    processData: false,
                    success: function(response) {
                        alert('Product added successfully!');
                        // Optionally, redirect or reset the form
                        $('#productForm')[0].reset();
                        $('#dynamicFields').empty();
                    },
                    error: function(xhr, status, error) {
                        alert('An error occurred while adding the product.');
                    }
                });
            });
        });
    </script>
</body>
</html>
